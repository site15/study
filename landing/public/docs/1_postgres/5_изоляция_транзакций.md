**–∏–∑–æ–ª—è—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** ‚Äî –æ–±—ä—è—Å–Ω—è—é **–ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º**, –Ω–æ —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–∞ —Å–æ–±–µ—Å–µ –∑–≤—É—á–∞–ª–æ —É–≤–µ—Ä–µ–Ω–Ω–æ –∏ –ø–æ-—Å–µ–Ω—å–æ—Ä—Å–∫–∏.

---

# üîí –ß—Ç–æ —Ç–∞–∫–æ–µ –∏–∑–æ–ª—è—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–ò–∑–æ–ª—è—Ü–∏—è** ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ, **–Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–¥–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥—Ä—É–≥–æ–π**, –µ—Å–ª–∏ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

–ò–¥–µ—è –ø—Ä–æ—Å—Ç–∞—è:

> —á–µ–º –≤—ã—à–µ –∏–∑–æ–ª—è—Ü–∏—è ‚Äî —Ç–µ–º –º–µ–Ω—å—à–µ ‚Äú–±–∞—Ä–¥–∞–∫–∞‚Äù, –Ω–æ —Ç–µ–º –¥–æ—Ä–æ–∂–µ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

## üß† –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (—á—Ç–æ –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ—à–∞–µ—Ç)

–ó–∞–ø–æ–º–Ω–∏ 3 —Å–ª–æ–≤–∞ ‚Äî –∏—Ö –ª—é–±—è—Ç —Å–ø—Ä–∞—à–∏–≤–∞—Ç—å:

1. **Dirty Read** ‚Äî —á—Ç–µ–Ω–∏–µ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **Non-repeatable Read** ‚Äî –¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –º–µ–∂–¥—É —á—Ç–µ–Ω–∏—è–º–∏
3. **Phantom Read** ‚Äî –ø–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏

---

# üìä –£—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ (–æ—Ç —Å–ª–∞–±–æ–≥–æ –∫ —Å–∏–ª—å–Ω–æ–º—É)

## **1. READ UNCOMMITTED**

üëâ *¬´—á–∏—Ç–∞–π –≤—Å—ë –ø–æ–¥—Ä—è–¥¬ª*

* –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
* **–≤ PostgreSQL –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** (–≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ READ COMMITTED)

‚ùó –ù–∞ —Å–æ–±–µ—Å–µ:

> –í PostgreSQL READ UNCOMMITTED = READ COMMITTED.

---

## **2. READ COMMITTED** *(—É—Ä–æ–≤–µ–Ω—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ PostgreSQL)*

üëâ *¬´–≤–∏–∂—É —Ç–æ–ª—å–∫–æ –∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω–æ–µ –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–ø—Ä–æ—Å–∞¬ª*

### –ß—Ç–æ –º–æ–∂–Ω–æ

* –∫–∞–∂–¥—ã–π SELECT –≤–∏–¥–∏—Ç **–ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**
* –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ SELECT –¥–≤–∞–∂–¥—ã ‚Üí –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Ä–∞–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –ü—Ä–æ–±–ª–µ–º—ã

* ‚ùå Non-repeatable read
* ‚ùå Phantom read

### –ü—Ä–∏–º–µ—Ä

```text
T1: SELECT balance FROM accounts; -- 100
T2: UPDATE accounts SET balance = 50; COMMIT;
T1: SELECT balance FROM accounts; -- —É–∂–µ 50
```

---

## **3. REPEATABLE READ**

üëâ *¬´–≤–∏–∂—É —Å–Ω–∏–º–æ–∫ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞—á–∞–ª–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏¬ª*

### –ß—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç

* –¥–∞–Ω–Ω—ã–µ **–Ω–µ –º–µ–Ω—è—é—Ç—Å—è** –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
* –Ω–µ—Ç non-repeatable read
* –Ω–µ—Ç phantom read *(–≤ PostgreSQL ‚Äî –¥–∞!)*

### –ù–æ

* –≤–æ–∑–º–æ–∂–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ `UPDATE`
* –º–æ–∂–µ—Ç –±—ã—Ç—å rollback

---

## **4. SERIALIZABLE** *(—Å–∞–º—ã–π —Å—Ç—Ä–æ–≥–∏–π)*

üëâ *¬´–∫–∞–∫ –±—É–¥—Ç–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ –æ—á–µ—Ä–µ–¥–∏¬ª*

### –ß—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç

* –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è
* –Ω–∏–∫–∞–∫–∏—Ö –∞–Ω–æ–º–∞–ª–∏–π
* –ø–æ–ª–Ω–∞—è –ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –¶–µ–Ω–∞

* –±–æ–ª—å—à–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ / –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
* –≤–æ–∑–º–æ–∂–Ω—ã –æ—à–∏–±–∫–∏:

```text
ERROR: could not serialize access due to read/write dependencies
```

üëâ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ ‚Äî **–ø–æ–≤—Ç–æ—Ä—è—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é**.

---

# üß© –¢–∞–±–ª–∏—Ü–∞ (–ª—é–±—è—Ç –Ω–∞ —Å–æ–±–µ—Å–∞—Ö)

| –£—Ä–æ–≤–µ–Ω—å          | Dirty | Non-repeatable | Phantom |
| ---------------- | ----- | -------------- | ------- |
| Read Uncommitted | ‚úÖ     | ‚úÖ              | ‚úÖ       |
| Read Committed   | ‚ùå     | ‚úÖ              | ‚úÖ       |
| Repeatable Read  | ‚ùå     | ‚ùå              | ‚ùå*      |
| Serializable     | ‚ùå     | ‚ùå              | ‚ùå       |

* –≤ PostgreSQL phantom read –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–∑-–∑–∞ MVCC

---

## üõ† –ö–∞–∫ –∑–∞–¥–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –∏–∑–æ–ª—è—Ü–∏–∏

```sql
BEGIN ISOLATION LEVEL REPEATABLE READ;
```

–∏–ª–∏

```sql
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
```

---

## üí¨ –ó–æ–ª–æ—Ç–∞—è —Ñ—Ä–∞–∑–∞ –¥–ª—è —Å–æ–±–µ—Å–∞

> –í PostgreSQL –∏–∑–æ–ª—è—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ MVCC, –ø–æ—ç—Ç–æ–º—É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π —á–∏—Ç–∞—é—Ç –≤–µ—Ä—Å–∏–∏ –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –ª–æ–≤—É—à–∫–∏

### ‚ùì Phantom read –µ—Å—Ç—å –≤ PostgreSQL?

**–û—Ç–≤–µ—Ç:**

> –ù–µ—Ç –≤ Repeatable Read, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MVCC, –∞ –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∫–∞–∫ –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö.

---

### ‚ùì Serializable = –±–æ–ª—å—à–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫?

**–ü—Ä–∞–≤–∏–ª—å–Ω–µ–µ —Å–∫–∞–∑–∞—Ç—å:**

> –í PostgreSQL Serializable ‚Äî —ç—Ç–æ SSI (Serializable Snapshot Isolation), –∞ –Ω–µ —Ç—É–ø–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Å–µ–≥–æ.

---

## üéØ –ö–æ—Ä–æ—Ç–∫–∞—è –∞–Ω–∞–ª–æ–≥–∏—è

* **Read Committed** ‚Äî —Å–º–æ—Ç—Ä–∏—à—å –Ω–æ–≤–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
* **Repeatable Read** ‚Äî –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª –≤—ã–ø—É—Å–∫ –≥–∞–∑–µ—Ç—ã
* **Serializable** ‚Äî —á–∏—Ç–∞–µ—à—å –ø–æ –æ—á–µ—Ä–µ–¥–∏, –Ω–∏–∫–æ–≥–æ –Ω–µ –ø—É—Å–∫–∞—é—Ç –≤–ø–µ—Ä—ë–¥